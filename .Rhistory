filter(State == "KY") %>%
group_by(year) %>%
summarise(number = length(value),
min = min(value),
q1 = quantile(value, .25),
median = median(value),
mean = mean(value),
q3 = quantile(value, .75),
max = max(value)
)
p <- ggplot(df.ky, aes(value))
p <- p + facet_grid(. ~ year)
p <- p + geom_histogram(bins = 15)
p <- p + ylab("ky hospitals")
p
df.in <-
df %>%
filter(State == "IN") %>%
group_by(year) %>%
summarise(number = length(value),
min = min(value),
q1 = quantile(value, .25),
median = median(value),
mean = mean(value),
q3 = quantile(value, .75),
max = max(value)
df.in <-
df %>%
filter(State == "IN") %>%
group_by(year) %>%
summarise(number = length(value),
min = min(value),
q1 = quantile(value, .25),
median = median(value),
mean = mean(value),
q3 = quantile(value, .75),
max = max(value)
)
p <- ggplot(df.in, aes(value))
p <- p + facet_grid(. ~ year)
df.in <-
df %>%
filter(State == "IN") %>%
group_by(year) %>%
summarise(number = length(value),
min = min(value),
q1 = quantile(value, .25),
median = median(value),
mean = mean(value),
q3 = quantile(value, .75),
max = max(value)
df.in <-
df %>%
filter(State == "IN") %>%
group_by(year) %>%
summarise(number = length(value),
min = min(value),
q1 = quantile(value, .25),
median = median(value),
mean = mean(value),
q3 = quantile(value, .75),
max = max(value)
)
df.in <-
df %>%
filter(State == "IN") %>%
group_by(year) %>%
summarise(number = length(value),
min = min(value),
q1 = quantile(value, .25),
median = median(value),
mean = mean(value),
q3 = quantile(value, .75),
max = max(value)
df.in <-
df %>%
filter(State == "IN") %>%
group_by(year) %>%
summarise(number = length(value),
min = min(value),
q1 = quantile(value, .25),
median = median(value),
mean = mean(value),
q3 = quantile(value, .75),
max = max(value)
)
df.in <-         df %>%
filter(State == "IN") %>%
group_by(year) %>%
summarise(number = length(value),
min = min(value),
q1 = quantile(value, .25),
median = median(value),
mean = mean(value),
q3 = quantile(value, .75),
max = max(value)
df.in <-         df %>%
filter(State == "IN") %>%
group_by(year) %>%
summarise(number = length(value),
min = min(value),
q1 = quantile(value, .25),
median = median(value),
mean = mean(value),
q3 = quantile(value, .75),
max = max(value)
)
df.in <-
df %>%
filter(State == "IN") %>%
group_by(year) %>%
summarise(number = length(value),
min = min(value),
q1 = quantile(value, .25),
median = median(value),
mean = mean(value),
q3 = quantile(value, .75),
max = max(value)
df.in <-
df %>%
filter(State == "IN") %>%
group_by(year) %>%
summarise(number = length(value),
min = min(value),
q1 = quantile(value, .25),
median = median(value),
mean = mean(value),
q3 = quantile(value, .75),
max = max(value)
)
file <- "./data_tidy/2016_readmission_penalties_all_hosp_five_years.csv"
df <- read.csv(file = file, header = T, stringsAsFactors = F)
df.all <-
df %>%
group_by(year) %>%
summarise(number = length(value),
min = min(value),
q1 = quantile(value, .25),
median = median(value),
mean = mean(value),
q3 = quantile(value, .75),
max = max(value)
df.all <-
df %>%
group_by(year) %>%
summarise(number = length(value),
min = min(value),
q1 = quantile(value, .25),
median = median(value),
mean = mean(value),
q3 = quantile(value, .75),
max = max(value)
)
p <- ggplot(df, aes(value))
p <- p + facet_grid(. ~ year)
p <- p + geom_histogram(bins = 15)
p <- p + ylab("all hospitals")
p
df.ky <-
df %>%
filter(State == "KY") %>%
group_by(year) %>%
summarise(number = length(value),
min = min(value),
q1 = quantile(value, .25),
median = median(value),
mean = mean(value),
q3 = quantile(value, .75),
max = max(value)
df.ky <-
df %>%
filter(State == "KY") %>%
group_by(year) %>%
summarise(number = length(value),
min = min(value),
q1 = quantile(value, .25),
median = median(value),
mean = mean(value),
q3 = quantile(value, .75),
max = max(value)
)
df.ky <-       df %>%
filter(State == "KY") %>%
group_by(year) %>%
summarise(number = length(value),
min = min(value),
q1 = quantile(value, .25),
median = median(value),
mean = mean(value),
q3 = quantile(value, .75),
max = max(value)
df.ky <-       df %>%
filter(State == "KY") %>%
group_by(year) %>%
summarise(number = length(value),
min = min(value),
q1 = quantile(value, .25),
median = median(value),
mean = mean(value),
q3 = quantile(value, .75),
max = max(value)
)
df.ky <-
df %>%
filter(State == "KY") %>%
group_by(year) %>%
summarise(number = length(value),
min = min(value),
q1 = quantile(value, .25),
median = median(value),
mean = mean(value),
q3 = quantile(value, .75),
max = max(value)
df.ky <-
df %>%
filter(State == "KY") %>%
group_by(year) %>%
summarise(number = length(value),
min = min(value),
q1 = quantile(value, .25),
median = median(value),
mean = mean(value),
q3 = quantile(value, .75),
max = max(value)
)
df.ky <-
df %>%
filter(State == "KY") %>%
group_by(year) %>%
summarise(number = length(value),
min = min(value),
q1 = quantile(value, .25),
median = median(value),
mean = mean(value),
q3 = quantile(value, .75),
max = max(value))
df.all <-
df %>%
group_by(year) %>%
summarise(number = length(value),
min = min(value),
q1 = quantile(value, .25),
median = median(value),
mean = mean(value),
q3 = quantile(value, .75),
max = max(value))
df.in <-
df %>%
filter(State == "IN") %>%
group_by(year) %>%
summarise(number = length(value),
min = min(value),
q1 = quantile(value, .25),
median = median(value),
mean = mean(value),
q3 = quantile(value, .75),
max = max(value))
p <- ggplot(df.in, aes(value))
p <- p + facet_grid(. ~ year)
p <- p + geom_histogram(bins = 15)
p <- p + ylab("in hospitals")
p
head(df.in)
df.ky.1 <-
df %>%
filter(State == "KY")
p <- ggplot(df.ky.1, aes(value))
p <- p + facet_grid(. ~ year)
p <- p + geom_histogram(bins = 15)
p <- p + ylab("ky hospitals")
p
df.in.1 <-
df %>%
filter(State == "IN")
p <- ggplot(df.in, aes(value))
p <- p + facet_grid(. ~ year)
p <- p + geom_histogram(bins = 15)
p <- p + ylab("in hospitals")
p
p <- ggplot(df.in.1, aes(value))
p <- p + facet_grid(. ~ year)
p <- p + geom_histogram(bins = 15)
p <- p + ylab("in hospitals")
p
file <- "./tables/Readmission_Penalties_All_Hosp_2013_2017.csv"
write.csv(df.all, file = file, row.names = F)
source('~/Desktop/hosp_readmission/R/03_table_readmission_penalty.R', echo=TRUE)
if(!file.exists(destfile){print("Rob")
if(!file.exists(destfile){print("Rob")}
destfile <- "./data_raw/readmit.csv"
if(!file.exists(destfile){print("Rob")}
if(!file.exists(destfile)){print("Rob")}
if(!file.exists(destfile)){print("Rob")}
if(!file.exists(destfile)){print("Rob")}else{print("Lori")}
file.exists("./data_raw/readmit.csv")
!file.exists("./data_raw/readmit.csv")
url <- "https://kaiserhealthnews.files.wordpress.com/2016/08/readmission_five_years_chart_withlink.csv"
destfile <- "./data_raw/readmit.csv"
if(!file.exists(destfile)){
download.file(url = url, destfile = destfile, method = "curl")
}
df <- read.csv("./readmit.csv", header = T, stringsAsFactors = F, skip = 6)
df <- read.csv("./data_raw/readmit.csv", header = T, stringsAsFactors = F, skip = 6)
library(Amelia)
missmap(df)
?pdf
file <- "./plots/readmission_penalty_missing_data.pdf"
file <- "./plots/readmission_penalty_missing_data.pdf"
pdf(file = file, width = 8, height = 5)
library(Amelia)
missmap(df)
dev.off()
apply(df, 2, function(x) sum(is.na(x)))
plot(apply(df, 2, function(x) sum(is.na(x))))
df.missing <- (apply(df, 2, function(x) sum(is.na(x))))
df.missing
df.missing <- data.frame(apply(df, 2, function(x) sum(is.na(x))))
View(df.missing)
names(df.missing)
names(df.missing)[1] <- "missing"
p <- ggplot(df.missing, aes())
p <- ggplot(df.missing, aes(missing))
p <- geom_bar()
p
p <- ggplot(df.missing, aes(missing))
p <- p + geom_bar()
p
View(df)
View(df.missing)
df$variables <- row.names(df.missing)
df.missing <- data.frame(apply(df, 2, function(x) sum(is.na(x))))
names(df.missing)[1] <- "missing"
df$variables <- row.names(df.missing)
df.missing$variables <- row.names(df.missing)
p <- ggplot(df.missing, aes())
p <- p + geom_bar()
p
p <- ggplot(df.missing, aes(variables))
p <- p + geom_bar()
p
p <- ggplot(df.missing, aes(missing))
p <- p + geom_bar()
p
View(df.missing)
p <- ggplot(df.missing, aes(missing))
p <- p + geom_bar(stat = "identify")
p <- p + geom_bar(stat = identity)
p <- ggplot(df.missing, aes(missing))
p <- p + geom_bar(stat = identity)
p <- ggplot(df.missing, aes(missing))
p <- p + geom_bar(stat = "identity")
p
p <- ggplot(df.missing, aes(x = 1:nrow(df.missing), missing))
p <- p + geom_bar(stat = "identity")
p
p <- ggplot(df.missing, aes(x = 1:nrow(df.missing), missing))
p <- p + geom_bar(stat = "identity")
p <- scale_x_continuous(labels = df.missing$variables)
p
p <- ggplot(df.missing, aes(x = 1:nrow(df.missing), missing))
p <- p + geom_bar(stat = "identity")
p <- scale_x_continuous(labels = df.missing$variables)
p
p <- ggplot(df.missing, aes(x = 1:nrow(df.missing), missing))
p <- p + geom_bar(stat = "identity")
p <- scale_x_discrete(labels = df.missing$variables)
p
str(df.missing)
p <- scale_x_discrete(breaks = c(1:nrow(df.missing)),
labels = df.missing$variables)
p
p <- scale_x_continuous(breaks = c(1:nrow(df.missing)),
labels = df.missing$variables)
p
df.missing$variables <- row.names(df.missing)
p <- ggplot(df.missing, aes(x = 1:nrow(df.missing), missing))
p <- p + geom_bar(stat = "identity")
p <- scale_x_continuous(breaks = c(1:nrow(df.missing)),
labels = df.missing$variables)
p
View(df.missing)
p <- ggplot(df.missing, aes(x = as.factor(variable), missing))
p <- p + geom_bar(stat = "identity")
p
p <- ggplot(df.missing, aes(x = as.factor(variable), missing))
p <- p + geom_point()
p
df.missing
p <- ggplot(df.missing, aes(x = as.factor(variables), missing))
p <- p + geom_point()
p
p <- ggplot(df.missing, aes(x = as.factor(variables), missing))
p <- p + geom_bar()
p
p <- p + geom_point()
p
p <- ggplot(df.missing, aes(x = as.factor(variables), missing))
p <- p + geom_point()
p
p <- p + ggtitle("Missing Data by Variable in Readmission Data")
p
file <- "Missing_Data_by_Variable_Readmission_Data.pdf"
ggsave(p, filename = file, height = 5, width = 8, unit = "in")
p <- theme(plot.title = element_text(hjust = 0.5))
file <- "Missing_Data_by_Variable_Readmission_Data.pdf"
ggsave(p, filename = file, height = 5, width = 8, unit = "in")
p <- ggplot(df.missing, aes(x = as.factor(variables), missing))
p <- p + geom_point()
p
p <- scale_x_continuous(breaks = c(1:nrow(df.missing)),
labels = df.missing$variables)
p <- p + ggtitle("Missing Data by Variable in Readmission Data")
p <- theme(plot.title = element_text(hjust = 0.5))
p <- p + theme(plot.title = element_text(hjust = 0.5))
file <- "./plots/Missing_Data_by_Variable_Readmission_Data.pdf"
ggsave(p, filename = file, height = 5, width = 8, unit = "in")
?ggsave
p <- ggplot(df.missing, aes(x = as.factor(variables), missing))
p <- p + geom_point()
p
p <- scale_x_continuous(breaks = c(1:nrow(df.missing)),
labels = df.missing$variables)
p <- p + ggtitle("Missing Data by Variable in Readmission Data")
p <- p + theme(plot.title = element_text(hjust = 0.5))
p <- p + ggtitle("Missing Data by Variable in Readmission Data")
?ggtitle
p <- ggplot(df.missing, aes(x = as.factor(variables), missing))
p <- p + geom_point()
p
p <- p + scale_x_continuous(breaks = c(1:nrow(df.missing)),
labels = df.missing$variables)
p <- p + ggtitle("Missing Data by Variable in Readmission Data")
p <- p + theme(plot.title = element_text(hjust = 0.5))
p
p <- ggplot(df.missing, aes(x = as.factor(variables), missing))
p <- p + geom_point()
p
p <- p + ggtitle("Missing Data by Variable in Readmission Data")
p <- p + theme(plot.title = element_text(hjust = 0.5))
p
file <- "./plots/Missing_Data_by_Variable_Readmission_Data.pdf"
ggsave(filename = file, height = 5, width = 8, unit = "in")
rm(list = ls())
source('~/Desktop/hosp_readmission/R/01_get_and_clean_data.R', echo=TRUE)
source('~/Desktop/hosp_readmission/R/03_table_readmission_penalty.R', echo=TRUE)
source('~/Desktop/hosp_readmission/R/03_table_readmission_penalty.R', echo=TRUE)
multiplot(p1, p2, p3, cols=1)
grid.arrange(p1, p2, p3, ncol = 1, main = "Main title")
library(ggplot2)
grid.arrange(p1, p2, p3, ncol = 1, main = "Main title")
library(grid)
library(gridextra)
library(gridExtra)
grid.arrange(p1, p2, p3, ncol = 1, main = "Main title")
grid.arrange(p1, p2, p3, ncol = 1, main = "Main title")
grid.arrange(p1, p2, p3, ncol = 2, main = "Main title")
grid.arrange(p1, p2, p3, ncol = 1, main = "Main title")
p1 <- ggplot(df, aes(value))
p1 <- p1 + facet_grid(. ~ year)
p1 <- p1 + geom_histogram(bins = 15)
p1 <- p1 + ylab("all hospitals")
p1
file <- "./plots/Readmission_penalties_All_Hosp_2013_2017.pdf"
ggsave(p1, filename = file, height = 5, width = 8, unit = "in")
p2 <- ggplot(df.ky.1, aes(value))
p2 <- p2 + facet_grid(. ~ year)
p2 <- p2 + geom_histogram(bins = 15)
p2 <- p2 + ylab("ky hospitals")
p2
file <- "./plots/Readmission_penalties_KY_Hosp_2013_2017.pdf"
ggsave(p2, filename = file, height = 5, width = 8, unit = "in")
p3 <- ggplot(df.in.1, aes(value))
p3 <- p3 + facet_grid(. ~ year)
p3 <- p3 + geom_histogram(bins = 15)
p3 <- p3 + ylab("in hospitals")
p3
file <- "./plots/Readmission_penalties_IN_Hosp_2013_2017.pdf"
ggsave(p3, filename = file, height = 5, width = 8, unit = "in")
library(ggplot2)
library(grid)
library(gridExtra)
grid.arrange(p1, p2, p3, ncol = 1, main = "Main title")
grid.arrange(p1, p2, ncol = 2, main = "Main title")
grid.arrange(p1, p2, ncol = 2, top = "Main title")
multiplot(p1, p2, cols=2)
grid.arrange(p1, p2, p3, ncol = 1, top = "Main title")
multiplot(p1, p2, p3, cols=1)
file <- "./plots/All_KY_IN_Hosp_Readmission_Penalty.pdf"
pdf(file = file, height = 5, width = 8)
library(ggplot2)
library(grid)
library(gridExtra)
grid.arrange(p1, p2, p3, ncol = 1, top = "Main title")
p4 <- grid.arrange(p1, p2, p3, ncol = 1, top = "Main title")
p4
file <- "./plots/All_KY_IN_Hosp_Readmission_Penalty.pdf"
pdf(file = file, height = 5, width = 8)
library(ggplot2)
library(grid)
library(gridExtra)
p4 <- grid.arrange(p1, p2, p3, ncol = 1, top = "Main title")
p4
dev.off()
file <- "./plots/All_KY_IN_Hosp_Readmission_Penalty.pdf"
pdf(file = file, height = 5, width = 8)
library(ggplot2)
library(grid)
library(gridExtra)
p4 <- grid.arrange(p1, p2, p3, ncol = 1, top = "Readmission Penalties by Year -- All, KY, IN")
p4
dev.off()
rm(list = ls())
